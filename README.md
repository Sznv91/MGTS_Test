# Тестовое задание

##### Согласно ТЗ необходимо было выполнить разработку простого консольного приложения с требованиями по функциональности:
1. Добавление контактов:
    - Приложение должно позволять пользователю добавлять новые контакты.
    - Для каждого контакта необходимо сохранять следующую информацию:
        - Имя
        - Фамилия
        - Номер пропуска (Уникальное поле, String, длина поля 8 символов, разрешенные символы: 0-9A-F. Пример строки: "00F1C313")

2. Просмотр контактов:
    - Отобразить список всех добавленных контактов с их информацией.
    - Отобразить только номера пропусков

3. Поиск контактов:
    - Реализовать возможность поиска контактов по номеру пропуска.

4. Удаление контактов:
    - Предоставить возможность удаления контакта по его уникальному идентификатору.

5. Обработка ошибок:
    - Предусмотреть обработку возможных исключений и некорректного ввода данных.
    - Приложение не должно завершаться с ошибкой при неверном вводе данных

6. Написать юнит-тесты для основных компонентов приложения.

## Требования к реализации:

- Использовать Java 8 или выше.
- Применение принципов ООП.
- Код должен быть чистым и хорошо структурированным.
- Добавить комментарии, объясняющие основные части кода.

## Дополнительные задания (необязательно):

- Сохранение данных:
    - Реализовать сохранение контактов в файл при закрытии приложения и загрузку при старте.

- Валидация данных:
    - Проверять корректность введенного номера пропуска.

## Дополнительно:
- Готовое приложение должно быть консольным и не требовать дополнительных библиотек.
- В репозитории или архиве с решением добавить файл README с инструкциями по запуску приложения и описанием выполненных дополнительных заданий.
- Решение предоставить в виде ссылки на репозиторий (GitHub, GitLab и т.д.) или архивом с исходным кодом.

---
# Выполненное задание
Задание выполнено в полном объеме по требованиям к функциональности и реализации, а так же выполнены дополнительные задания.
Так же дополнительно добавлено определение ОС запуска приложения(Windows/other), для корректной обработки консольного
ввода на различных ОС.

Реализация сохранения контактов в файл при закрытии приложения выполнена в двух разных вариантах (реализация разнесена в разные ветки):
- Сериализация объектов java в текстовый файл. (ветка main)
- Построчное сохранение в txt из внутреннего хранилища приложения. (ветка save_to_txt)

Для демонстрации ОПП было реализовано два типа внутреннего хранилища:
- На основе List
- На основе Map

Оба хранилища унаследованы от общего предка "AbstractStorage", который в свою очередь реализует интерфейс "Storage".
Это позволяет изменять реализацию хранилища не внося изменения в код который его использует.

Так же принципы ООП применялись при написании тестов хранилищ: сделан один абстрактный класс предок, реализующий все необходимые проверки,
а наследники лишь передают в него нужную реализацию типа хранилища: MapStorage или ListStorage.

Реализация сервиса хранения "StorageService" как отдельного слоя между кодом использующем хранилище и непосредственно
самим хранилищем позволили перенести код обработки исключений валидации данных из методов вызывающих хранилище.
В самом хранилище подобный функционал не был реализован по причине того что валидация данных, не является частью работы
хранилища данных.

## Инструкция по запуску:
- Открыть терминал
    - Cоздать/Перейти в каталог куда будет загружен исходный код:<br>
      `mkdir d:\sazonov_tz`<br>
      `d:`<br>
      `cd d:\sazonov_tz`
- Загрузить репозиторий с github:<br>
  `git clone https://github.com/Sznv91/MGTS_Test.git` <br>
  `cd ./MGTS_Test`
- Выполнить сборку проекта средствами Maven, во время сборки так же будет выполнено тестирование классов-хранилищ и метода валидации "Номера пропуска" контакта:
  <br>
  `mvn package` Если возникает проблема при сборке - необходимо понизить версию java до <= 22.0.2
- Перейти в созданный системой сборки каталог "target":<br>
  `cd ./target`
- Выполнить запуск приложения. Дефолтная реализация хранилища контактов - ArrayStorage. Она будет выбрана автоматически,
  если не будет передан параметр при запуске "map":<br>
  `java -jar ./MGTS_test-1.0-SNAPSHOT.jar` - запуск с дефолтной реализацией хранилища.<br>
  `java -jar ./MGTS_test-1.0-SNAPSHOT.jar map` - запуск с реализацией MapStorage.

### Пояснение к сереализации.
Готово. Приложение работает. После команды "exit" и выхода из приложения, в каталоге в котором хранится файл "MGTS_test-1.0-SNAPSHOT.jar"
будет создан файл `saveState.txt`. При следующем открытии приложения данные автоматически десириализуются. В этом случае
без разницы какой тип хранилища указан при повторном запуске, будет десириализован тот тип который был указан при создании файла сериализации.
В случае удаления файла - ошибки не возникнет, однако сохранённые данные будут утеряны, но можно будет запустить приложение с
другим типом реализации хранилища.

### Пояснение с сохранению в Txt файл.
После первого закрытия приложения командой `exit` произойдет сохранение данных из хранилища на диск. Название и расположение файла будут
такми же как и в случае сериализации, однако файл будет читаем, и изменения внесённые в ручную в файл будут загружены при следующем
запуске приложения. В отличие от варианта с сериализацией - имеет значение с каким параметром хранилища выполняется запуск (ListStorage или MapStorage).

### Сборка и запуск приложения из ветки "save_to_txt"
- Перейти в корневой каталог проекта<br>
  `cd ..` - Проверьте что в теперь путь в консоле оканчивается на `MGTS_Test`
- `mvn clean`
- `git switch save_to_txt`
- `mvn package`
- `cd ./target`
- `java -jar ./MGTS_test-1.0-SNAPSHOT.jar` или <br>`java -jar ./MGTS_test-1.0-SNAPSHOT.jar map`

Готово. Возврат к ветке `master` выполняется аналогичным образом.

### Ошибки связанные с некорректным вводом данных\команд.
Приложение не крашится при вводе невалидных данных, или не предусмотренных команд. При не соблюдении синтаксиса ввода команд,
крашей тоже не возникает, а выводится сообщение с правильным примером использования команды.